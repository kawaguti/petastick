<html>
<head>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <title>petastick - sticky note</title>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js" type="text/javascript"></script>
  <!-- <script src="js/jquery-1.3.2.min.js" type="text/javascript"></script> -->
  <!-- <script src="js/jquery-ui-1.7.2.custom.min.js" type="text/javascript"></script> -->
  <style type="text/css">
    .draggable { width: 150px; background-color: Silver; position: absolute; }
    .input { position: absolute; visibility:hidden; }
  </style>
  <script type="text/javascript">
    var elm_btm = 0;
    $(document).ready(function() {
        $("#add-button").click(function(){
	    var id = elm_btm;
	    elm_btm = elm_btm + 1;

	    $("#draw-area").append('<div class="draggable" id="d' + id + '">' + id + '</div>');
	    $("#d" + id).draggable();
	    $("#d" + id).click( function(){
		$("#elm-key").val($(this).attr("id"));
		$("#elm-value").val($(this).text());
		$("#elm-value").css("top", $(this).position().top );
		$("#elm-value").css("left", $(this).position().left );
		$("#elm-value").css("visibility", "visible" );
		$("#elm-value").focus();
	    });
	});
	var text_submit = ( function() {
	    var s = $("#elm-value").val();
	    var id = "#" + $("#elm-key").val();
	    if ( id != "" ) {
		$( id ).text(s);
	    } else {
		$( id ).css("visibility","hidden");
	    }
	    $( id ).css("width", (s.length * 20) + " px");
	    $("#elm-value").css("visibility", "hidden" );
	    return false;
	});
	$("#elm").submit( text_submit );
	$("#elm-value").blur( text_submit );
    });



  </script>
</head>
<body>
<!--[if IE 5]><div id="ie5" class="ie"><![endif]-->
<!--[if IE 6]><div id="ie6" class="ie"><![endif]-->
<!--[if IE 7]><div id="ie7" class="ie"><![endif]-->
<input id="add-button" type="button" value="add element" />

<div id="draw-area">
</div>

<form id="elm">
  <input id="elm-key" class="input" />
  <input id="elm-value" class="input" />
</form>

</body>
